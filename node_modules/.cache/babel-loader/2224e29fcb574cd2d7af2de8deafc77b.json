{"ast":null,"code":"var _jsxFileName = \"/Users/ioanalexandrumuresan/Desktop/DS/DS2022_30442_Muresan_Ioan-Alexandru_Assignment_1_frontend/src/User/WebSocket.js\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport * as SockJS from \"sockjs-client\";\nimport * as Stomp from \"stompjs\";\nimport './User.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar stompClient = null;\nfunction setConnected(connected) {\n  document.getElementById(\"connect\").disabled = connected;\n  document.getElementById(\"disconnect\").disabled = !connected;\n  document.getElementById(\"conversationDiv\").style.visibility = connected ? \"visible\" : \"hidden\";\n  document.getElementById(\"response\").innerHTML = \"\";\n}\nfunction connect() {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  var socket = new SockJS(\"http://127.0.0.1:8080/ws\");\n  stompClient = Stomp.over(socket);\n  if (user) {\n    stompClient.connect({}, function (frame) {\n      setConnected(true);\n      console.log(\"Connected: \" + frame);\n      stompClient.subscribe(\"/all/messages/\" + user, function (messageOutput) {\n        showMessageOutput(JSON.parse(messageOutput.body));\n      });\n    });\n  }\n}\nfunction disconnect() {\n  console.log(\"here\");\n  if (stompClient != null) {\n    stompClient.disconnect();\n    stompClient = null;\n  }\n  setConnected(false);\n  console.log(\"Disconnected\");\n}\nfunction showMessageOutput(messageOutput) {\n  console.log(messageOutput);\n  var response = document.getElementById(\"response\");\n  var p = document.createElement(\"p\");\n  p.style.wordWrap = \"break-word\";\n  p.appendChild(document.createTextNode(new Date(messageOutput.time).toDateString() + \" \" + new Date(messageOutput.time).toTimeString() + \": \" + messageOutput.text));\n  response.appendChild(p);\n}\nfunction WebSk() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"connect\",\n          onClick: connect,\n          children: \"See notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"disconnect\",\n          onClick: () => {\n            disconnect();\n          },\n          children: \"Stop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"conversationDiv\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"response\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Insert something here\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"idk\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n_c = WebSk;\nexport default WebSk;\nvar _c;\n$RefreshReg$(_c, \"WebSk\");","map":{"version":3,"names":["axios","React","useEffect","useState","SockJS","Stomp","stompClient","setConnected","connected","document","getElementById","disabled","style","visibility","innerHTML","connect","user","JSON","parse","localStorage","getItem","socket","over","frame","console","log","subscribe","messageOutput","showMessageOutput","body","disconnect","response","p","createElement","wordWrap","appendChild","createTextNode","Date","time","toDateString","toTimeString","text","WebSk"],"sources":["/Users/ioanalexandrumuresan/Desktop/DS/DS2022_30442_Muresan_Ioan-Alexandru_Assignment_1_frontend/src/User/WebSocket.js"],"sourcesContent":["import axios from \"axios\";\nimport React, {useEffect, useState} from \"react\";\nimport * as SockJS from \"sockjs-client\";\nimport * as Stomp from \"stompjs\";\nimport './User.css';\n\nvar stompClient = null;\n\nfunction setConnected(connected) {\n  document.getElementById(\"connect\").disabled = connected;\n  document.getElementById(\"disconnect\").disabled = !connected;\n  document.getElementById(\"conversationDiv\").style.visibility = connected\n    ? \"visible\"\n    : \"hidden\";\n  document.getElementById(\"response\").innerHTML = \"\";\n}\n\nfunction connect() {\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  var socket = new SockJS(\"http://127.0.0.1:8080/ws\");\n  stompClient = Stomp.over(socket);\n  if (user) {\n    stompClient.connect({}, function(frame) {\n      setConnected(true);\n      console.log(\"Connected: \" + frame);\n      stompClient.subscribe(\"/all/messages/\" + user, function(\n        messageOutput\n      ) {\n        showMessageOutput(JSON.parse(messageOutput.body));\n      });\n    });\n  }\n}\n\nfunction disconnect() {\n  console.log(\"here\");\n  if (stompClient != null) {\n    stompClient.disconnect();\n    stompClient = null;\n  }\n  setConnected(false);\n  console.log(\"Disconnected\");\n}\n\nfunction showMessageOutput(messageOutput) {\n  console.log(messageOutput);\n  var response = document.getElementById(\"response\");\n  var p = document.createElement(\"p\");\n  p.style.wordWrap = \"break-word\";\n  p.appendChild(\n    document.createTextNode(\n      new Date(messageOutput.time).toDateString() +\n        \" \" +\n        new Date(messageOutput.time).toTimeString() +\n        \": \" +\n        messageOutput.text\n    )\n  );\n  response.appendChild(p);\n}\n\nfunction WebSk() {\n\n\n\n    return ( \n        <div>\n                <div>\n                    <div>\n                    <button id=\"connect\" onClick={connect}>\n                        See notifications\n                    </button>\n                    <button\n                        id=\"disconnect\"\n                        onClick={() => {\n                        disconnect();\n                        }}>\n                        Stop\n                    </button>\n                    </div>\n                    <br />\n                    <div id=\"conversationDiv\">\n                    <p id=\"response\"></p>\n                    </div>\n                </div>\n            \n            <label>Insert something here</label>\n            <br></br>\n            <input type='text' id=\"idk\"></input>\n        </div>\n    )\n}\n\nexport default WebSk;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,KAAK,MAAM,SAAS;AAChC,OAAO,YAAY;AAAC;AAEpB,IAAIC,WAAW,GAAG,IAAI;AAEtB,SAASC,YAAY,CAACC,SAAS,EAAE;EAC/BC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,QAAQ,GAAGH,SAAS;EACvDC,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC,CAACC,QAAQ,GAAG,CAACH,SAAS;EAC3DC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC,CAACE,KAAK,CAACC,UAAU,GAAGL,SAAS,GACnE,SAAS,GACT,QAAQ;EACZC,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAACI,SAAS,GAAG,EAAE;AACpD;AAEA,SAASC,OAAO,GAAG;EACjB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EACrD,IAAIC,MAAM,GAAG,IAAIjB,MAAM,CAAC,0BAA0B,CAAC;EACnDE,WAAW,GAAGD,KAAK,CAACiB,IAAI,CAACD,MAAM,CAAC;EAChC,IAAIL,IAAI,EAAE;IACRV,WAAW,CAACS,OAAO,CAAC,CAAC,CAAC,EAAE,UAASQ,KAAK,EAAE;MACtChB,YAAY,CAAC,IAAI,CAAC;MAClBiB,OAAO,CAACC,GAAG,CAAC,aAAa,GAAGF,KAAK,CAAC;MAClCjB,WAAW,CAACoB,SAAS,CAAC,gBAAgB,GAAGV,IAAI,EAAE,UAC7CW,aAAa,EACb;QACAC,iBAAiB,CAACX,IAAI,CAACC,KAAK,CAACS,aAAa,CAACE,IAAI,CAAC,CAAC;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAEA,SAASC,UAAU,GAAG;EACpBN,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;EACnB,IAAInB,WAAW,IAAI,IAAI,EAAE;IACvBA,WAAW,CAACwB,UAAU,EAAE;IACxBxB,WAAW,GAAG,IAAI;EACpB;EACAC,YAAY,CAAC,KAAK,CAAC;EACnBiB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;AAC7B;AAEA,SAASG,iBAAiB,CAACD,aAAa,EAAE;EACxCH,OAAO,CAACC,GAAG,CAACE,aAAa,CAAC;EAC1B,IAAII,QAAQ,GAAGtB,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC;EAClD,IAAIsB,CAAC,GAAGvB,QAAQ,CAACwB,aAAa,CAAC,GAAG,CAAC;EACnCD,CAAC,CAACpB,KAAK,CAACsB,QAAQ,GAAG,YAAY;EAC/BF,CAAC,CAACG,WAAW,CACX1B,QAAQ,CAAC2B,cAAc,CACrB,IAAIC,IAAI,CAACV,aAAa,CAACW,IAAI,CAAC,CAACC,YAAY,EAAE,GACzC,GAAG,GACH,IAAIF,IAAI,CAACV,aAAa,CAACW,IAAI,CAAC,CAACE,YAAY,EAAE,GAC3C,IAAI,GACJb,aAAa,CAACc,IAAI,CACrB,CACF;EACDV,QAAQ,CAACI,WAAW,CAACH,CAAC,CAAC;AACzB;AAEA,SAASU,KAAK,GAAG;EAIb,oBACI;IAAA,wBACQ;MAAA,wBACI;QAAA,wBACA;UAAQ,EAAE,EAAC,SAAS;UAAC,OAAO,EAAE3B,OAAQ;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAE7B,eACT;UACI,EAAE,EAAC,YAAY;UACf,OAAO,EAAE,MAAM;YACfe,UAAU,EAAE;UACZ,CAAE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAEG;MAAA;QAAA;QAAA;QAAA;MAAA,QACH,eACN;QAAA;QAAA;QAAA;MAAA,QAAM,eACN;QAAK,EAAE,EAAC,iBAAiB;QAAA,uBACzB;UAAG,EAAE,EAAC;QAAU;UAAA;UAAA;UAAA;QAAA;MAAK;QAAA;QAAA;QAAA;MAAA,QACf;IAAA;MAAA;MAAA;MAAA;IAAA,QACJ,eAEV;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAoC,eACpC;MAAA;MAAA;MAAA;IAAA,QAAS,eACT;MAAO,IAAI,EAAC,MAAM;MAAC,EAAE,EAAC;IAAK;MAAA;MAAA;MAAA;IAAA,QAAS;EAAA;IAAA;IAAA;IAAA;EAAA,QAClC;AAEd;AAAC,KA9BQY,KAAK;AAgCd,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}